{% extends "base.html" %}
{% block content %}
<div style="width:100%;max-width:520px;margin:0 auto;padding:0 12px;display:flex;flex-direction:column;gap:14px;">
  <h2 style="font-weight:600;font-size:1.25rem;margin:0;">Editar local</h2>
  <form method="POST" style="display:flex;flex-direction:column;gap:12px;">
    <label>Nome do local</label>
    <input type="text" name="name" value="{{ location.name }}" required style="padding:10px;border:1px solid #e3e7eb;border-radius:10px;">

    <div style="margin-top:8px;font-weight:600;">Dias e horários</div>
    <div style="max-height:60vh;overflow-y:auto;padding-right:4px;border:1px solid #f0f2f4;border-radius:10px;">
      {% set dias = dias %}
      {% for i in range(7) %}
      {% set h = horarios.get(i) %}
      <div style="display:flex;flex-wrap:wrap;align-items:center;gap:8px;padding:10px 10px;border-bottom:1px solid #f3f4f6;">
        <label style="width:44px;font-weight:600;">{{ dias[i] }}</label>
        <input type="checkbox" name="workdays" value="{{ i }}" {% if h %}checked{% endif %}>
        <div style="display:flex;flex-wrap:wrap;gap:8px;flex:1 1 220px;align-items:center;">
          <span style="color:#6b7280;font-size:0.92rem;">Início</span>
          <input type="time" name="start_{{ i }}" value="{% if h %}{{ h.start_time.strftime('%H:%M') }}{% endif %}" style="padding:8px;border:1px solid #e3e7eb;border-radius:8px;flex:1 1 120px;min-width:120px;">
          <span style="color:#6b7280;font-size:0.92rem;">Fim</span>
          <input type="time" name="end_{{ i }}" value="{% if h %}{{ h.end_time.strftime('%H:%M') }}{% endif %}" style="padding:8px;border:1px solid #e3e7eb;border-radius:8px;flex:1 1 120px;min-width:120px;">
          <span style="color:#6b7280;font-size:0.92rem;">Intervalo</span>
          <input type="time" name="break_start_{{ i }}" value="{% if h and h.break_start %}{{ h.break_start.strftime('%H:%M') }}{% endif %}" style="padding:8px;border:1px solid #e3e7eb;border-radius:8px;flex:1 1 120px;min-width:120px;">
          <span style="color:#6b7280;font-size:0.92rem;">até</span>
          <input type="time" name="break_end_{{ i }}" value="{% if h and h.break_end %}{{ h.break_end.strftime('%H:%M') }}{% endif %}" style="padding:8px;border:1px solid #e3e7eb;border-radius:8px;flex:1 1 120px;min-width:120px;">
        </div>
      </div>
      {% endfor %}
    </div>

    <div style="position:sticky;bottom:0;background:#f7f7f8;padding:12px 0;display:flex;gap:10px;justify-content:flex-end;">
      <a href="{{ url_for('main.locations_list') }}" style="background:#fff;border:1px solid #e3e7eb;border-radius:10px;padding:10px 14px;text-decoration:none;color:#232323;">Cancelar</a>
      <button type="submit" style="background:#232323;color:#fff;border:none;border-radius:10px;padding:10px 14px;">Salvar</button>
    </div>
  </form>
</div>
{% endblock %}